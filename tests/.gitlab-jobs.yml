# anchor to run tests for every job
.job_template: &job_script
  script: |
    if [ -f ./tests/${CI_JOB_NAME} ]; then
        ./tests/${CI_JOB_NAME}
    fi

# global test-before script
before_script:
  - |
    if [ -f ./tests/before ]; then
          ./tests/before
    fi

# global test-after script
after_script:
  - |
    if [ -f ./tests/after ]; then
          ./tests/after
    fi

test-installer:
  stage: installation
  <<: *job_script

### All below this point are placeholders

test-update:
  stage: update
  <<: *job_script

test-functional-crucible:
  stage: functional
  <<: *job_script

### Multiple Jobs may be defined for the same stage

test-integration-rickshaw:
  stage: integration
  <<: *job_script

test-integration-trafficgen:
  stage: integration
  <<: *job_script
